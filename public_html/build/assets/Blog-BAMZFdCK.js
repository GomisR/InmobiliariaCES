import{q as S,r as c,v as y,j as e,$ as I,Y as n}from"./app-DpfpjghG.js";import{s as t}from"./index-BctFJj0Y.js";function B(){var j;const{props:p}=S(),i=(j=p.auth)==null?void 0:j.user,v=!!i,[f,l]=c.useState([]),[a,d]=c.useState(null),{data:h,setData:u,post:g,processing:b,errors:o,reset:N}=y({puntuacion:"",comentario:""});c.useEffect(()=>{fetch("/valoraciones").then(s=>s.json()).then(s=>{l(s.valoraciones),d(s.media)})},[]);const C=s=>{s.preventDefault(),g(t("valoraciones.store"),{onSuccess:()=>{N(),fetch("/valoraciones").then(r=>r.json()).then(r=>{l(r.valoraciones),d(r.media)})}})},x=s=>Array.from({length:5},(r,m)=>e.jsx("span",{children:m<s?"★":"☆"},m));return e.jsxs("div",{children:[e.jsx(I,{title:"Blog - Valoraciones"}),e.jsxs("nav",{children:[e.jsx("div",{children:e.jsx("strong",{children:"INMOBILIARIA CES"})}),e.jsxs("div",{children:[e.jsx(n,{href:"/",children:"Inicio"}),e.jsx(n,{href:"/pisos",children:"Inmuebles"}),e.jsx(n,{href:"/#contacto",children:"Contacto"}),e.jsx(n,{href:"/blog",children:"Blog"}),v?e.jsxs("div",{className:"desplegable",children:[e.jsx("button",{className:"desplegable-nombre",children:i.nombre}),e.jsxs("div",{className:"desplegable-menu",children:[e.jsx(n,{href:"/perfil",children:"Perfil"}),e.jsx(n,{href:t("logout"),method:"post",as:"button",children:"Cerrar sesión"})]})]}):e.jsx(n,{href:t("login"),children:"Log in"})]})]}),e.jsx("h1",{children:"Opiniones de nuestros clientes"}),a!==null&&e.jsxs("div",{className:"valoracion-media",children:[e.jsxs("p",{children:["Puntuación media: ",e.jsxs("strong",{children:[a," / 5"]})]}),e.jsx("div",{className:"estrellas-media",children:x(Math.round(a))})]}),i&&e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"puntuacion",children:"Puntuación (1-5):"}),e.jsx("input",{id:"puntuacion",type:"number",min:"1",max:"5",value:h.puntuacion,onChange:s=>u("puntuacion",s.target.value),required:!0}),o.puntuacion&&e.jsx("p",{style:{color:"red"},children:o.puntuacion})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"comentario",children:"Comentario (opcional):"}),e.jsx("textarea",{id:"comentario",placeholder:"¿Qué opinas sobre nuestro servicio?",value:h.comentario,onChange:s=>u("comentario",s.target.value),rows:"4"}),o.comentario&&e.jsx("p",{style:{color:"red"},children:o.comentario})]}),e.jsx("button",{type:"submit",disabled:b,children:"Publicar valoración"})]}),e.jsx("div",{className:"valoraciones-contenedor",children:f.map(s=>{var r;return e.jsxs("div",{className:"ficha-valoracion",children:[e.jsx("strong",{children:(r=s.usuario)==null?void 0:r.nombre}),e.jsx("div",{children:x(s.puntuacion)}),e.jsx("p",{children:s.comentario})]},s.id)})}),e.jsx("footer",{className:"footer",children:e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Inmobiliaria CES"})," © ",new Date().getFullYear()," — Todos los derechos reservados."]}),e.jsx("p",{children:"Nos comprometemos a ofrecer un servicio cercano, profesional y honesto. Estamos aquí para ayudarte."}),e.jsxs("p",{children:["Nuestros telefonos de contacto son los siguientes:",e.jsx("br",{}),"+34669052244 (Celia) y/o +34683125643 (Sandra)"]}),e.jsxs("div",{className:"footer-links",children:[e.jsx(n,{href:"/privacidad",children:"Política de Privacidad"}),e.jsx(n,{href:"/#contacto",children:"Contacto"}),e.jsx(n,{href:"/blog",children:"Blog"})]})]})})]})}export{B as default};
