import{q as g,v,r as C,j as e,Y as a}from"./app-DpfpjghG.js";import{s as d}from"./index-BctFJj0Y.js";function E(){const{auth:x,usuariosEnBusqueda:c=[]}=g().props,r=x.user,l=r.rol==="administrador",p=!!r,j=r.calendar_email??r.email??"",{data:n,setData:o,patch:t,processing:u,errors:i}=v({nombre:r.nombre||"",password:"",password_confirmation:"",buscando:!!r.buscando_piso,calendar_email:j}),b=s=>{s.preventDefault(),t(d("perfil.update"),{onSuccess:()=>{h("Perfil actualizado correctamente."),o("password",""),o("password_confirmation",""),setTimeout(()=>h(""),1e4)}})},f=()=>{o("buscando",!n.buscando),t(d("perfil.quiereBusqueda"))},[w,h]=C.useState(""),m=l&&n.calendar_email?`https://calendar.google.com/calendar/embed?src=${encodeURIComponent(n.calendar_email)}&ctz=Europe/Madrid`:null;return e.jsxs("div",{id:"Cuerpo",children:[e.jsxs("nav",{children:[e.jsx("div",{children:e.jsx("strong",{children:"INMOBILIARIA CES"})}),e.jsxs("div",{children:[e.jsx(a,{href:"/",children:"Inicio"}),e.jsx(a,{href:"/pisos",children:"Inmuebles"}),e.jsx(a,{href:"/#contacto",children:"Contacto"}),e.jsx(a,{href:"/blog",children:"Blog"}),p?e.jsxs("div",{className:"desplegable",children:[e.jsx("button",{className:"desplegable-nombre",children:r.nombre}),e.jsxs("div",{className:"desplegable-menu",children:[e.jsx(a,{href:"/perfil",children:"Perfil"}),e.jsx(a,{href:d("logout"),method:"post",as:"button",children:"Cerrar sesión"})]})]}):e.jsx(a,{href:d("login"),children:"Log in"})]})]}),e.jsxs("h1",{children:["Hola ",r==null?void 0:r.nombre]}),!l&&e.jsxs("div",{id:"BusquedaPiso",children:[e.jsx("p",{children:" Si estas interesado en encontrar el piso perfecto para tí háznoslo saber"}),e.jsx("br",{}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:n.buscando,onChange:f}),"Estoy en búsqueda de pisos"]})]}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{children:[e.jsx("label",{children:"Nuevo nombre de usuario:"}),e.jsx("input",{type:"text",name:"nombre",value:n.nombre,onChange:s=>o("nombre",s.target.value)}),i.nombre&&e.jsx("p",{children:i.nombre})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Nueva contraseña:"}),e.jsx("input",{type:"password",name:"password",value:n.password,onChange:s=>o("password",s.target.value)}),i.password&&e.jsx("p",{children:i.password})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Confirmar nueva contraseña:"}),e.jsx("input",{type:"password",name:"password_confirmation",value:n.password_confirmation,onChange:s=>o("password_confirmation",s.target.value)})]}),l&&e.jsxs("div",{children:[e.jsx("label",{children:"Gmail de Google Calendar:"}),e.jsx("input",{id:"GmailCalendario",type:"email",name:"calendar_email",value:n.calendar_email,onChange:s=>o("calendar_email",s.target.value),placeholder:"correo@gmail.com"}),i.calendar_email&&e.jsx("p",{style:{color:"red"},children:i.calendar_email})]}),e.jsx("button",{type:"submit",disabled:u,children:"Guardar cambios"})]}),l&&e.jsxs("div",{children:[e.jsx("h2",{children:"Usuarios en búsqueda de pisos"}),c.length>0?e.jsxs("table",{border:"1",cellPadding:"8",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Email"})]})}),e.jsx("tbody",{children:c.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.id}),e.jsx("td",{children:s.nombre}),e.jsx("td",{children:s.email})]},s.id))})]}):e.jsx("p",{children:"No hay usuarios buscando piso en este momento."})]}),l&&m&&e.jsxs("section",{style:{marginTop:"2rem"},children:[e.jsx("h2",{children:"Mi Calendario"}),e.jsx("iframe",{title:"Calendario de Google",src:m,style:{border:0,width:"100%",height:"600px"},frameBorder:"0",scrolling:"no"})]}),e.jsx("footer",{className:"footer",children:e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Inmobiliaria CES"})," © ",new Date().getFullYear()," — Todos los derechos reservados."]}),e.jsx("p",{children:"Nos comprometemos a ofrecer un servicio cercano, profesional y honesto. Estamos aquí para ayudarte."}),e.jsxs("p",{children:["Nuestros telefonos de contacto son los siguientes:",e.jsx("br",{}),"+34669052244 (Celia) y/o +34683125643 (Sandra)"]}),e.jsxs("div",{className:"footer-links",children:[e.jsx(a,{href:"/privacidad",children:"Política de Privacidad"}),e.jsx(a,{href:"/#contacto",children:"Contacto"}),e.jsx(a,{href:"/blog",children:"Blog"})]})]})})]})}export{E as default};
